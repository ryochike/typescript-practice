# 1. TypeScriptのあらまし

このセクションでは、TypeScriptのトランスパイラの基本的な使い方を体験し、JavaScriptとの違い（静的型付けなど）を簡単に学びます。

## 1-1. Hello TypeScript

### 概要

TypeScriptのトランスパイル＆実行の流れを学び、静的型チェックのメリットを体感する課題です。  
この課題では、以下を実践します:

- Node.js環境もしくはTypeScript Playgroundでの実行  
- 型エラーを意図的に発生させ、TypeScriptのエラー検出機能を確認  
- 型アノテーションを使った変数宣言の基礎

> **Note:** 厳密にはTypeScriptは高水準言語→高水準言語への変換を行うため「トランスパイル」と呼びます。公式ドキュメントでも慣習的に「コンパイル」という用語が使われていますが、本研修では正確な用語の「トランスパイル」を使用します。

### 目的・ゴール

- **Node.js環境またはTS Playgroundを使って、TypeScriptコードをトランスパイル＆実行できるようになる**  
- **静的型チェックによる型エラーの検知を体験し、TypeScriptのメリットを理解する**  
- **型アノテーションを使って変数を宣言・代入する方法を学ぶ**

### 前準備（環境について）

- ローカル環境で実行する場合、Node.jsおよびTypeScriptコンパイラ (`tsc`) のインストールが必要です。もし `tsc` コマンドが見つからない場合は、以下のどちらかで解決できます:
  - `npm install -g typescript` でTypeScriptをグローバルインストール  
  - `npx tsc` を使って、プロジェクトローカルの TypeScript を呼び出す
- もしローカル環境のセットアップが難しい場合、[TypeScript Playground](https://www.typescriptlang.org/play) を利用することもできます。

### 手順

1. **プロジェクトを取得**  
   事前にリポジトリをクローンまたはダウンロードしてください。フォルダ構成は以下のようになっています。  

   ```
   .
   ├─ src
   │   └─ 1-overview
   │       └─ hello.ts
   ├─ dist
   ├─ tsconfig.json
   └─ package.json
   ```

2. **`hello.ts`ファイルを開く**  
   このファイルには複数の課題がコメントで用意されています。順番に取り組んでください。

3. **課題に沿ってコードを実装**  

   - **課題1: 変数宣言と文字列出力**  

     ```ts
     /**
      * 課題1: 変数宣言と文字列出力
      *
      * 以下の手順で実装してください：
      * 1. userName という変数を宣言し、あなたの名前を代入してください
      * 2. console.log を使って「Hello, あなたの名前!」と出力してください
      */

     // TODO: ここにuserName変数の宣言とconsole.logを実装
     ```

   - **課題2: 型システムの基本**  

     ```ts
     /**
      * 課題2: 型システムの基本
      *
      * 以下の変数に適切な型アノテーションを追加してください：
      * 1. userAge: 数値型 (25を代入)
      * 2. isActive: 真偽値型 (trueを代入)
      * 3. greeting: 文字列型 (「こんにちは、[userName]さん。あなたは[userAge]歳です。」)
      */

     // TODO: ここに型アノテーション付きの変数宣言を実装
     ```

   - **課題3: 型エラーの確認**  

     ```ts
     /**
      * 課題3: 型エラーの確認
      *
      * 以下のコードをコメント解除して、TypeScriptの型チェックがどのように
      * 動作するか確認してみてください。エラーメッセージを読み、なぜエラーが
      * 発生するのか理解しましょう。
      */
     
     // userName = 123; // 文字列型の変数に数値を代入
     // userAge = "25"; // 数値型の変数に文字列を代入
     ```

   - **課題4: 結果の出力**  

     ```ts
     /**
      * 課題4: 結果の出力
      *
      * greeting変数の内容をコンソールに出力してください。
      */

     // TODO: ここにconsole.logを実装
     ```

4. **コードをトランスパイル＆実行**  
   プロジェクトにはすでに`tsconfig.json`が用意されています。以下のコマンドでトランスパイルが可能です。  

   ```bash
   # プロジェクト全体をトランスパイル
   npm run build

   # 単一ファイルをトランスパイル（npx tscを使う例）
   npx tsc src/1-overview/hello.ts

   # 生成されたJavaScriptコードを実行
   node dist/1-overview/hello.js
   ```

   - **TS Playgroundを使う場合**: `hello.ts`の内容をPlaygroundにコピーし、`Run`ボタンを押して結果を確認してください。

5. **型エラーを確認**  
   - 課題3でコメント解除したコードがある場合、再度トランスパイルしてみましょう。  
   - `tsc` 実行時にエラーが表示されます。エラーメッセージをよく読み、「なぜエラーが出ているのか」を理解してください。

6. **テストの実行（任意）**  
   実装が完了したら、テストを実行して正しく実装できているか確認します。  

   ```bash
   npm run test -- src/1-overview/hello.test.ts
   ```

   - テストがすべて通過すればOKです。エラーが発生した場合は、エラーメッセージを元に修正してください。

### チェックポイント

- `Hello, (あなたの名前)!` がコンソールに正しく表示されるか  
- 変数に型アノテーションを正しく付与できているか  
- 数値型や文字列型への誤代入がエラーとして検知されることを確認したか  
- `greeting` 変数の内容がコンソールに表示されるか  
- テストコマンドを実行し、すべて通過できるか  

### 発展課題（任意）

短時間で終わる課題を希望する方は、上記の基本課題だけでOKです。TypeScriptをさらに深掘りしたい方は、以下に取り組んでみてください。

1. **`tsconfig.json`の設定を確認**  
   - `target` や `strict` を変更し、どのような影響があるか試してみてください。  
   - 特に `strict: true` を有効化すると、TypeScriptがより厳密な型チェックを行うようになります。  
   - `allowJs` や `checkJs` オプションなど、JavaScriptファイルとの相互運用について調べてみてください。

2. **型アサーション（Type Assertion）のリスクを体験**  
   - 例: `const value: any = "hello"; console.log((value as number).toFixed(2));` のように誤った型アサーションを行うコードを試してみて、**実行時にどのような問題が起こるか**を確認しましょう。
   - `as unknown as number` などのダブルアサーションの使い所や、**極力避けるべき理由**について考察してみてください。

3. **複合型の利用**  
   - 異なる型の変数を組み合わせて、より複雑な型（オブジェクト型、配列型、ユニオン型など）を持つ変数を作成してみましょう。  
   - たとえば `type User = { name: string; age: number; isActive: boolean }` のように型を定義し、変数に適用してみてください。

4. **ビルドオプションを試す**  
   - `tsc --init` コマンドで新しい `tsconfig.json` を作成してみると、さまざまなオプションのデフォルト設定やドキュメントコメントを確認できます。既存の`tsconfig.json`と見比べるのも勉強になります。  
